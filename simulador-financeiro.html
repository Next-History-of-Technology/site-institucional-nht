<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador Financeiro - Vazamento de Amônia</title>
  <link rel="stylesheet" href="./styles/header.css" />
  <link rel="stylesheet" href="./styles/Simulador.css" />
</head>

<body>
  <div class="header">

    <div class="logo_container">

      <img src="./assets/logo-nh3.png">

      <h3>Next History Technology</h3>
    </div>

    <div class="links_container">
      <a href="index.html">Home</a>
      <a href="index.html#quem_somos">Sobre</a>
      <a href="./simulador-financeiro.html">Simulador Financeiro</a>
      <a href="index.html#outras_opcoes">Contrate-nos</a>
    </div>

    <div class="botao_container">
      <button onclick="logar()" class="btn_login">Login</button>
      <button onclick="cadastrar()" class="btn_cadastrar">Cadastrar</button>
    </div>

  </div>


  <!-- conteudo -->
  <div class="conteudo">
    <div class="titulo">
      <h1>Simulador Financeiro</h1>
    </div>
    <div class="subtitulo">

      <p>Um frigorífico deve ter sistemas de monitoramento de gás de acordo com a lei NR-15 e NR-36, e em caso de descumprimento, estará suscetível a multas e indenizações.</p>
      <p>
        Calcule o prejuízo potencial em caso de vazamento de gás amônia no seu frigorífico e a recuperação com redução de riscos.
      </p>
    </div>
    <div class="card-input">
      <div class="container-inputs">
        <label class="container-input">
          <span class="titulo-input"><b>Informe o faturamento diário:</b></span> <br />
          <input type="text" id="input_faturamento" placeholder="ex: 15000" value="15000"/>
          <br /><br />
        </label>
        <label class="container-input">
           <b class="titulo-input"> Houve paralisação?</b><br />
          <select id="select_paralisacao" onchange="mostrarCampos()">
            <option selected disabled value="default">Escolha uma opção</option>
            <option value="Não">Não</option>
            <option value="Sim">Sim</option>
          </select>
          <br /><br />
        </label>

        <div id="campos_paralisacao" style="display: none;">
          <label class="container-input">
  
            <span class="titulo-input"><b> Quantos dias durou a paralisação?</b></span> <br />
            <input type="text" id="input_periodo" placeholder="ex: 2" value="2"/>
            <br /><br />
          </label>        
        </div>

        <label class="container-input qtd_funcionario">
          <span class="titulo-input"><b>Quantidade de funcionários:</b></span> <br />
          <input type="text" id="input_funcionarios" placeholder="ex: 50" value="50"/><br /><br />
        </label>

      </div>
    </div>

    <button class="button-calcular" onclick="calcular()">CALCULAR</button>
    <br/>
    <div class="exibicao" id="msg"></div>
  </div>

  <script>
    function mostrarCampos() {
      if (select_paralisacao.value == "Sim") {
        campos_paralisacao.style.display = "block";
      } else {
        campos_paralisacao.style.display = "none";
      }
    }

    function calcular() {
      var faturamento = Number(input_faturamento.value);
      var dias = Number(input_periodo.value);
      var funcionarios = Number(input_funcionarios.value);
      var houveParalisacao = select_paralisacao.value;


      // validação
      if (faturamento <= 0 || isNaN(faturamento)) {
        alert("Informe um faturamento válido");
        return;
      } else if (houveParalisacao == "default") {
        alert("Por favor, selecione se houve paralisação.");
        return;
      } else if (houveParalisacao == "Sim" && (dias <= 0 || isNaN(dias))) {
        alert("Informe um período (dias) válido");
        return;
      } else if (funcionarios <= 0 || isNaN(funcionarios)) {
        alert("Informe uma quantidade válida de funcionários");
        return;
      }

      // valores fixos
      
      var multaMinimaBase = 443.97;
      var multaReincidencia = 44396.84;
      var multaFuncionario = 104.31;
      var faturamentoMensal = faturamento * 30;

      var perda = 0;
      if (houveParalisacao == "Sim") {
        perda = faturamento * dias;
      }

      var perdaFunc = funcionarios * multaFuncionario;
      var totalMultas = perdaFunc + multaMinimaBase + multaReincidencia;
      var impactoMultas = ((totalMultas / faturamentoMensal) * 100).toFixed(1);
      var perdaTotal = perda + totalMultas;
      var poupando = totalMultas
      var multaMin = multaMinimaBase + perdaFunc;
      var multaMax = multaReincidencia + perdaFunc;

      // mensagem organizada nas DIVs
      var msgHTML = `
      <div class="resultado-container"> 
          <div class="coluna-texto">
            
            <div class="bloco-faturamento"> 
                  <h4>Faturamento Mensal</h4>
                  <p>Faturamento mensal estimado: ${faturamentoMensal.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL"
      })}</p>
                  <p>Impacto das multas no faturamento mensal: ${impactoMultas}%</p>
                  <hr>    
              </div>
              
              <div class="bloco-inicial">
                  <h3>Prejuízo Estimado</h3>
                  ${houveParalisacao == "Sim" ? `<p><b>Perda direta de faturamento:</b> ${perda.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL"
      })}</p>`
          : ""}
                  
  
                  <p><b>Multa pelo total de Funcionários:</b> ${perdaFunc.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</p>

                  <p>Em caso de reincidência...</p>

                  <p><b>Total de Multas:</b> ${totalMultas.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</p>
                  ${multaMinimaBase.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })} (multa em 1º caso) + ${multaReincidencia.toLocaleString("pt-BR", {style:"currency", currency: "BRL"})} (multa máx. por reincidência) + ${perdaFunc.toLocaleString("pt-BR", {style:"currency", currency: "BRL"})} (multa por funcionário x quantidade de funcionários).</p>

                  <h3> Perda Total Estimada:</h3>
                  <h2 style="color: red;">${perdaTotal.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</h2> 
                  <hr>  
                </div>
  
              
              <div class="bloco-reducao">
                  <h4>Simulação de Redução de Prejuízo</h4>
                  <p>Com nossa equipe temos uma melhoria de ${impactoMultas}%  em cima do seu faturamento mensal referente ao total de multas .</p>
                  <p><b>Eliminando a perda de:</b> ${totalMultas.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })} em multas
                    
                  <p>Com nosso serviço a tomada de decisão é aprimorada com base nos dados </p> 
                  <h3>Poupando</h3> 
                  <h2 style="color: green;" >${poupando.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</h2> 
                  
              </div>
          </div>
  
          <div class="lado">
              <div class="bloco-informativo">
                  <h4>Multas</h4>
                  <p><b>Multa mínima:</b> ${multaMinimaBase.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</p>
                  <p><b>Multa máxima em caso de Reincidência:</b> ${multaReincidencia.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })}</p>
                  
                  <p><b>Multa por funcionário:</b> ${multaFuncionario.toLocaleString("pt-BR", { style: "currency", currency: "BRL" })})</p>
              </div>
          </div>
      </div>
  `;

      msg.innerHTML = msgHTML;
    }
  </script>
</body>

</html>